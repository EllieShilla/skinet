"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[474],{7474:(I,f,r)=>{r.r(f),r.d(f,{AccountModule:()=>a});var c=r(6895),u=r(4047),i=r(433),t=r(1571),h=r(9479),v=r(4015);class m{constructor(e,o,s){this.accountService=e,this.router=o,this.activatedRoute=s}ngOnInit(){this.returnUrl=this.activatedRoute.snapshot.queryParams.returnUrl||"/shop",this.createLoginForm()}createLoginForm(){this.loginForm=new i.cw({email:new i.NI("",[i.kI.required,i.kI.pattern("^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$")]),password:new i.NI("",i.kI.required)})}onSubmit(){this.accountService.login(this.loginForm.value).subscribe(()=>{this.router.navigateByUrl(this.returnUrl)},e=>{console.log(e)})}}m.\u0275fac=function(e){return new(e||m)(t.Y36(h.B),t.Y36(u.F0),t.Y36(u.gz))},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-login"]],decls:9,vars:5,consts:[[1,"d-flex","justify-content-center","mt-5"],[1,"col-3"],[3,"formGroup","ngSubmit"],[1,"h3","mb-3","fw-normal"],["formControlName","email",3,"label"],["formControlName","password",3,"label","type"],["type","submit",1,"w-100","btn","btn-lg","btn-primary",2,"margin-bottom","10px",3,"disabled"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(3,"h1",3),t._uU(4,"Please sign in"),t.qZA(),t._UZ(5,"app-text-input",4)(6,"app-text-input",5),t.TgZ(7,"button",6),t._uU(8,"Sign in"),t.qZA()()()()),2&e&&(t.xp6(2),t.Q6J("formGroup",o.loginForm),t.xp6(3),t.Q6J("label","Email Address"),t.xp6(1),t.Q6J("label","Password")("type","password"),t.xp6(1),t.Q6J("disabled",o.loginForm.invalid))},dependencies:[i._Y,i.JJ,i.JL,i.sg,i.u,v.t]});var b=r(9751),y=r(4986),x=r(3532);var w=r(3900),C=r(9646),N=r(4004);function S(n,e){if(1&n&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&n){const o=e.$implicit;t.xp6(1),t.hij(" ",o," ")}}function Z(n,e){if(1&n&&(t.TgZ(0,"ul",9),t.YNc(1,S,2,1,"li",10),t.qZA()),2&n){const o=t.oxw();t.xp6(1),t.Q6J("ngForOf",o.errors)}}class p{constructor(e,o,s){this.accountService=e,this.router=o,this.fb=s}ngOnInit(){this.createRegisterForm()}createRegisterForm(){this.registerForm=this.fb.group({displayName:[null,[i.kI.required]],email:[null,[i.kI.required,i.kI.pattern("^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$")],[this.validateEmailNotTaken()]],password:[null,[i.kI.required]]})}onSubmit(){this.accountService.register(this.registerForm.value).subscribe(()=>{this.router.navigateByUrl("/shop")},e=>{console.log(e),this.errors=e.errors})}validateEmailNotTaken(){return e=>function J(n=0,e,o=y.P){let s=-1;return null!=e&&((0,x.K)(e)?o=e:s=e),new b.y(g=>{let d=function F(n){return n instanceof Date&&!isNaN(n)}(n)?+n-o.now():n;d<0&&(d=0);let T=0;return o.schedule(function(){g.closed||(g.next(T++),0<=s?this.schedule(void 0,s):g.complete())},d)})}(500).pipe((0,w.w)(()=>e.value?this.accountService.checkEmailExist(e.value).pipe((0,N.U)(o=>o?{emailExists:!0}:null)):(0,C.of)(null)))}}p.\u0275fac=function(e){return new(e||p)(t.Y36(h.B),t.Y36(u.F0),t.Y36(i.qu))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-register"]],decls:11,vars:7,consts:[[1,"d-flex","justify-content-center","mt-5"],[1,"col-3"],[3,"formGroup","ngSubmit"],[1,"h3","mb-3","fw-normal"],["formControlName","displayName",3,"label"],["formControlName","email",3,"label"],["formControlName","password",3,"label","type"],["class","text-danger list-unstyled",4,"ngIf"],["type","submit",1,"w-100","btn","btn-lg","btn-primary",2,"margin-bottom","10px",3,"disabled"],[1,"text-danger","list-unstyled"],[4,"ngFor","ngForOf"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(3,"h1",3),t._uU(4,"Register"),t.qZA(),t._UZ(5,"app-text-input",4)(6,"app-text-input",5)(7,"app-text-input",6),t.YNc(8,Z,2,1,"ul",7),t.TgZ(9,"button",8),t._uU(10,"Register"),t.qZA()()()()),2&e&&(t.xp6(2),t.Q6J("formGroup",o.registerForm),t.xp6(3),t.Q6J("label","Display Name"),t.xp6(1),t.Q6J("label","Email Address"),t.xp6(1),t.Q6J("label","Password")("type","password"),t.xp6(1),t.Q6J("ngIf",o.errors),t.xp6(1),t.Q6J("disabled",o.registerForm.invalid))},dependencies:[c.sg,c.O5,i._Y,i.JJ,i.JL,i.sg,i.u,v.t]});const A=[{path:"login",component:m},{path:"register",component:p}];class l{}l.\u0275fac=function(e){return new(e||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[u.Bz.forChild(A),u.Bz]});var R=r(4466);class a{}a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[c.ez,l,R.m]})}}]);